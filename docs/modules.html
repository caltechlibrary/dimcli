

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module Reference &mdash; DimCli  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Getting Started with Dimcli" href="getting-started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> DimCli
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started with Dimcli</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Module Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.__init__">dimcli.login</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.core.api">dimcli.core.api</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.utils">dimcli.utils</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DimCli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Module Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-reference">
<h1>Module Reference<a class="headerlink" href="#module-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-dimcli.__init__">
<span id="dimcli-login"></span><h2>dimcli.login<a class="headerlink" href="#module-dimcli.__init__" title="Permalink to this headline">¶</a></h2>
<p>This module contains utilities for logging in and out of the Dimensions API.</p>
<p>NOTE: these functions are available via the top level <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> module. E.g.:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py function">
<dt id="dimcli.__init__.login">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">endpoint</span><span class="o">=</span><span class="default_value">'https://app.dimensions.ai'</span></em>, <em class="sig-param"><span class="n">instance</span><span class="o">=</span><span class="default_value">'live'</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Login into the Dimensions API and store the query token in memory.</p>
<p>Two cases:</p>
<ul class="simple">
<li><p>If credentials are not passed, login is attempted using the local dsl.ini credentials file.</p></li>
<li><p>If Google COLAB is detected and user/psw is not available, the interactive login workflow is triggered</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>optional</em>) – A filename/path where to save the data. If not provided, a unique name is generated automatically.</p></li>
<li><p><strong>username</strong> (<em>str</em><em>, </em><em>optional</em>) – The API username</p></li>
<li><p><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The API password</p></li>
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>optional</em>) – The API endpoint - default is “<a class="reference external" href="https://app.dimensions.ai">https://app.dimensions.ai</a>”</p></li>
<li><p><strong>instance</strong> (<em>str</em><em>, </em><em>optional</em>) – The instance name, from the local dsl.ini credentials file. Default: ‘live’</p></li>
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The API key (available to some users instead of username/password)</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Verbose mode. Default: True.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>If you have already set up the credentials file (see above), no need to pass log in details</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
<p>Otherwise you can authenticate by passing your login details as arguments</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can specify endpoint, which by default is set to “<a class="reference external" href="https://app.dimensions.ai">https://app.dimensions.ai</a>”</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">,</span> <span class="n">ednpoint</span><span class="o">=</span><span class="s2">&quot;https://nannies-research.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you use key based authentication, then do</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;my-secret-key&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://your-url.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.__init__.login_status">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">login_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#login_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.login_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility to check whether we are logged in or not</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if logged in, otherwise False.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login_status</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.__init__.logout">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">logout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#logout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the connection to the Dimensions API.</p>
<p>This allows to create a new connection subsequently, eg to a different endpoint.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-dimcli.core.api">
<span id="dimcli-core-api"></span><h2>dimcli.core.api<a class="headerlink" href="#module-dimcli.core.api" title="Permalink to this headline">¶</a></h2>
<p>This module contains core functionalities for querying the Dimensions API.</p>
<p>NOTE: the two main objects in this module (<code class="docutils literal notranslate"><span class="pre">Dsl</span></code> and <code class="docutils literal notranslate"><span class="pre">DslDataset</span></code>) are available via the <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> module. E.g.:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt id="dimcli.core.api.Dsl">
<em class="property">class </em><code class="sig-prename descclassname">dimcli.core.api.</code><code class="sig-name descname">Dsl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Dsl object is the main interface for interacting with the Dimensions API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Set a global setting that determines whether query JSON results get printed out. Note that in Jupyter environments this is not needed, because iPython rich widgets are used by default.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search grants for &quot;graphene&quot; return researchers&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">&lt;dimcli.dimensions.DslDataset object&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">.</span><span class="n">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;researchers&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;ur.01332073522.49&#39;</span><span class="p">,</span>
<span class="go">        &#39;count&#39;: 75,</span>
<span class="go">        &#39;last_name&#39;: &#39;White&#39;,</span>
<span class="go">        &#39;first_name&#39;: &#39;Nicholas J&#39;},</span>
<span class="go">    &quot;... JSON data continues ... &quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dimcli.core.api.Dsl.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">retry</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a single DSL query.</p>
<p>This method handles the query token from the API and regenerates it if it’s expired. If the API throws a ‘Too Many Requests for the Server’ error, the method sleeps 30 seconds before retrying.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=None</em>) – Setting that determines whether the query JSON results should be printed out. If None, it inherits from the Dsl global setting. Note that in Jupyter environments this is not needed, because iPython rich widgets are used by default.</p></li>
<li><p><strong>retry</strong> (<em>int</em><em>, </em><em>default=0</em>) – Number of times to retry the query if it fails.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=None</em>) – Verbose mode. If None, it inherits from the Dsl global setting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search grants where start_year=2020 return grants&quot;</span><span class="p">)</span>
<span class="go">&lt;dimcli.dimensions.DslDataset object&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.Dsl.query_iterative">
<code class="sig-name descname">query_iterative</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">skip</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pause</span><span class="o">=</span><span class="default_value">1.5</span></em>, <em class="sig-param"><span class="n">force</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">maxlimit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tot_count_prev_query</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl.query_iterative"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl.query_iterative" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a DSL query and then keep querying until all matching records have been extracted.</p>
<p>The API returns a maximum of 1000 records per call. If a DSL query results in more than 1000 matches, it is possible to use pagination to get more results.</p>
<p>Iterative querying works by automatically paginating through all records available for a result set. The original query gets turned into a loop that uses the <cite>limit</cite> / <cite>skip</cite> operators until all the results available have been extracted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>q</strong> (<em>str</em>) – The DSL query. Important: pagination keywords eg <cite>limit</cite> / <cite>skip</cite> should be omitted.</p></li>
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Determines whether the final results are rendered via the iPython display widget (for Jupyter notebooks).</p></li>
<li><p><strong>limit</strong> (<em>int</em><em>, </em><em>default=1000</em>) – How many records to extract per iteration. Defaults to 1000.</p></li>
<li><p><strong>skip</strong> (<em>int</em><em>, </em><em>default=0</em>) – Offset for first iteration. Defaults to 0. After the first iteration, this value is calculated dynamically.</p></li>
<li><p><strong>pause</strong> (<em>float</em><em>, </em><em>default=1.5s</em>) – How much time to pause after each iterarion, expressed in seconds. Defaults to 1.5. Note: each iteration gets timed, so the pause time is used only when the query time is more than 2s.</p></li>
<li><p><strong>force</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Continue the extraction even if one of the iterations fails due to an error.</p></li>
<li><p><strong>maxlimit</strong> (<em>int</em><em>, </em><em>default=0</em>) – The maximum number of records to extract in total. If 0, all available records are extracted, up to the API upper limit of 50k records per query.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Verbose mode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query_iterative</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search grants where category_for.name=&quot;0206 Quantum Physics&quot; return grants&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Starting iteration with limit=1000 skip=0 ...</span>
<span class="go">0-1000 / 8163 (4.062144994735718s)</span>
<span class="go">1000-2000 / 8163 (1.5146172046661377s)</span>
<span class="go">2000-3000 / 8163 (1.7225260734558105s)</span>
<span class="go">3000-4000 / 8163 (1.575329065322876s)</span>
<span class="go">4000-5000 / 8163 (1.521540880203247s)</span>
<span class="go">5000-6000 / 8163 (1.471721887588501s)</span>
<span class="go">6000-7000 / 8163 (1.5068159103393555s)</span>
<span class="go">7000-8000 / 8163 (1.4724757671356201s)</span>
<span class="go">8000-8163 / 8163 (0.7611980438232422s)</span>
<span class="go">===</span>
<span class="go">Records extracted: 8163</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dimcli.core.api.DslDataset">
<em class="property">class </em><code class="sig-prename descclassname">dimcli.core.api.</code><code class="sig-name descname">DslDataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">IPython.core.display.JSON</span></code></p>
<p>Wrapper for JSON results from DSL.</p>
<p>This object makes it easier to process, save and load API JSON data.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;machine learning&quot; return publications limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 20 (total = 2501114)</span>
<span class="go">Time: 1.36s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4383191536. Records: 100/2501114&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">count_batch</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">count_total</span>
<span class="go">2501114</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">json</span>
<span class="go">#  =&gt; returns the underlying JSON data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;publications&#39;</span><span class="p">]</span>
<span class="go">#  =&gt; shortcut for the &#39;publications&#39; key in the underlying JSON data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">publications</span>
<span class="go">#  =&gt; ..this is valid too!</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe">
<code class="sig-name descname">as_dataframe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame.</p>
<p>If <cite>key</cite> is empty, the first available JSON key (eg ‘publications’) is used to determine
what JSON data should be turned into a dataframe (mostly relevant when using multi-result DSL queries).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The JSON results data object that needs to be processed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_authors">
<code class="sig-name descname">as_dataframe_authors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_authors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a publication author.</p>
<p>This method works only with ‘publications’ queries and it’s clever enough to know if the <cite>authors</cite> or <cite>author_affiliations</cite> (deprecated) fields are used. The list of affiliations per each author are not broken down and are returned as JSON. So in essence you get one row per author.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_authors_affiliations">
<code class="sig-name descname">as_dataframe_authors_affiliations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_authors_affiliations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_authors_affiliations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a publication affiliation.</p>
<p>This method works only with ‘publications’ queries and it’s clever enough to know if the <cite>authors</cite> or <cite>author_affiliations</cite> (deprecated) fields are used. If an author has multiple affiliations, they would be represented in different rows (hence the same authors may appear on different rows).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_concepts">
<code class="sig-name descname">as_dataframe_concepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_concepts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_concepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘concept’.</p>
<p>This method works only with ‘publications’ and ‘grants’ queries and it’s clever enough to know if the <cite>concepts</cite> or <cite>concepts_scores</cite> fields are used. Additional metrics like ‘frequency’ and ‘score_average’ are also included in the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_funders">
<code class="sig-name descname">as_dataframe_funders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_funders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_funders" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘funder’.</p>
<p>This method works only with ‘grants’ queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_investigators">
<code class="sig-name descname">as_dataframe_investigators</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_investigators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_investigators" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘investigator’.</p>
<p>This method works only with ‘grants’ queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dimensions_url">
<code class="sig-name descname">as_dimensions_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">records</span><span class="o">=</span><span class="default_value">500</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dimensions_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dimensions_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that turns a list of records into a Dimensions webapp URL, by using the record IDs as filters.</p>
<p>NOTE: this functionality is EXPERIMENTAL and may break or be removed in future versions. Also, it works only with: publications, grants, patents, clinical_trials, policy_documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>records</strong> (<em>int</em><em>, </em><em>default=500</em>) – The number of record IDs to use. With more than 500, it is likely to incur into a ‘414 Request-URI Too Large’ error.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string representing a Dimensions URL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where id in [&quot;pub.1120715293&quot;, &quot;pub.1120975084&quot;, &quot;pub1122068834&quot;, &quot;pub.1120602308&quot;] return publications&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">as_dimensions_url</span><span class="p">()</span>
<span class="go">&#39;https://app.dimensions.ai/discover/publication?search_text=id%3A+%28pub.1120975084+OR+pub.1120715293+OR+pub.1120602308%29&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.chunks">
<code class="sig-name descname">chunks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">400</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator for going through chunks of the JSON results.</p>
<p>Note: in DSL queries with multiple <cite>return</cite> statements it is better to specify which result-type needs to be chunked using the <cite>key</cite> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>default=400</em>) – Number of objects (records) to include in each chunk.</p></li>
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The JSON results data object that needs to be chunked eg ‘publications’ or ‘grants’. If not specified, the first available dict key is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A iterator object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>iterator</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Break up a 1000 records dataset into groups of 100.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dslquery</span><span class="p">(</span><span class="s2">&quot;search publications return publications limit 1000&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">chunks</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.count_batch">
<em class="property">property </em><code class="sig-name descname">count_batch</code><a class="headerlink" href="#dimcli.core.api.DslDataset.count_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of results returned from the query.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.count_total">
<em class="property">property </em><code class="sig-name descname">count_total</code><a class="headerlink" href="#dimcli.core.api.DslDataset.count_total" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of results in Dimensions for the query (as opposed to the results returned in the JSON payload).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.errors_string">
<em class="property">property </em><code class="sig-name descname">errors_string</code><a class="headerlink" href="#dimcli.core.api.DslDataset.errors_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that merges all errors messages into a single string.</p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_clinical_trials_list">
<em class="property">classmethod </em><code class="sig-name descname">from_clinical_trials_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_clinical_trials_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_clinical_trials_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw clinical_trials data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A clinical_trials list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_grants_list">
<em class="property">classmethod </em><code class="sig-name descname">from_grants_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_grants_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_grants_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw grants data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A grants list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_organizations_list">
<em class="property">classmethod </em><code class="sig-name descname">from_organizations_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_organizations_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_organizations_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw organizations data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – An organizations list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_patents_list">
<em class="property">classmethod </em><code class="sig-name descname">from_patents_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_patents_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_patents_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw patents data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A patents list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_policy_documents_list">
<em class="property">classmethod </em><code class="sig-name descname">from_policy_documents_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_policy_documents_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_policy_documents_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw policy_documents data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A policy_documents list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_publications_list">
<em class="property">classmethod </em><code class="sig-name descname">from_publications_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_publications_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_publications_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw publications data.</p>
<p>This functionality can be used to reload data that was cached locally, or to combine the merged results of separate API queries into a single DslDataset object.</p>
<p>Once created, the DslDataset object has the same exact behaviour as when it is obtained from an API query (so one can take advatange of dataframe creation methods, for example).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A list of publications, in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rawdata</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search publications return publications&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">publications</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">rawdata</span><span class="p">)</span>
<span class="go">list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newDataset</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">DslDataset</span><span class="o">.</span><span class="n">from_publications_list</span><span class="p">(</span><span class="n">rawdata</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newDataset</span>
<span class="go">&lt;dimcli.DslDataset object #4767014816. Records: 20/20&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_researchers_list">
<em class="property">classmethod </em><code class="sig-name descname">from_researchers_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_researchers_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_researchers_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw researchers data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A researchers list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.good_data_keys">
<code class="sig-name descname">good_data_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.good_data_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.good_data_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that returns the ‘data’ keys of the inner JSON object, excluding metadata like ‘stats’, ‘warnings’ and ‘version’ info.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of dictionary keys.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">queryresults</span><span class="o">.</span><span class="n">good_data_keys</span><span class="p">()</span>
<span class="go">[&#39;publications&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.keys_and_count">
<code class="sig-name descname">keys_and_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.keys_and_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.keys_and_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that previews the contents of the inner JSON object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of tuples.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">queryresults</span><span class="o">.</span><span class="n">keys_and_count</span><span class="p">()</span>
<span class="go">[(&#39;_stats&#39;, 3), (&#39;_warnings&#39;, 1), (&#39;_version&#39;, 2), (&#39;publications&#39;, 100)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.load_json_file">
<em class="property">classmethod </em><code class="sig-name descname">load_json_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.load_json_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.load_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a file containing DSL JSON data and returns a valid DslDataset object.</p>
<p>Note: this is normally used in combination with the <cite>to_json_file</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – A valid filename (including path if necessary) that contains the JSON data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Save the results of a query to a JSON file, then reload the same file and create a new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where journal.title=&quot;nature medicine&quot; return publications[id+title+year+concepts] limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 100 (total = 12641)</span>
</pre></div>
</div>
<p>Save the data to a local json file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s2">&quot;test-api-save.json&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Saved to file:  test-api-save.json</span>
</pre></div>
</div>
<p>Create a new DslDataset object by loading the contents of the JSON file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span> <span class="o">=</span> <span class="n">DslDataset</span><span class="o">.</span><span class="n">load_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Loaded file:  test-api-save.json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4370267824. Records: 100/12641&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.to_gsheets">
<code class="sig-name descname">to_gsheets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.to_gsheets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.to_gsheets" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the dataframe version of some API results to a public google sheet. Google OAUTH client credentials are a prerequisite for this method to work correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – The spreadsheet title, if one wants to reuse an existing spreadsheet.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method assumes that the calling environment can provide valid Google authentication credentials.
There are two routes to make this work, depending on whether one is using Google Colab or a traditional Jupyter environment.</p>
<p><strong>Google Colab</strong>
This is the easiest route. In Google Colab, all required libraries are already available. The <cite>to_gsheets</cite> method simply triggers the built-in authentication process via a pop up window.</p>
<p><strong>Jupyter</strong>
This route involves a few more steps. In Jupyter, it is necessary to install the gspread, oauth2client and gspread_dataframe modules first. Secondly, one needs to create Google Drive access credentials using OAUTH (which boils down to a JSON file). Note that the credentials file needs to be saved in: <cite>~/.config/gspread/credentials.json</cite> (for gpread).
The steps are described at <a class="reference external" href="https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id">https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The google sheet URL as a string.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.to_json_file">
<code class="sig-name descname">to_json_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.to_json_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.to_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Export API results data to a JSON file.</p>
<p>Note: this is normally used in combination with the <cite>load_json_file</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em><em>, </em><em>optional</em>) – A filename/path where to save the data. If not provided, a unique name is generated automatically.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string representation of the filename the data is saved to.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Save the results of a query to a JSON file, then reload the same file and create a new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where journal.title=&quot;nature medicine&quot; return publications[id+title+year+concepts] limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 100 (total = 12641)</span>
</pre></div>
</div>
<p>Save the data to a local json file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s2">&quot;test-api-save.json&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Saved to file:  test-api-save.json</span>
</pre></div>
</div>
<p>Data can be reloaded from file, using the <cite>load_json_file</cite> class method.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span> <span class="o">=</span> <span class="n">DslDataset</span><span class="o">.</span><span class="n">load_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Loaded file:  test-api-save.json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4370267824. Records: 100/12641&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-dimcli.utils">
<span id="dimcli-utils"></span><h2>dimcli.utils<a class="headerlink" href="#module-dimcli.utils" title="Permalink to this headline">¶</a></h2>
<p>This module contains various utilities for working with the API and the data it returns.</p>
<dl class="py function">
<dt id="dimcli.utils.chunks_of">
<code class="sig-prename descclassname">dimcli.utils.</code><code class="sig-name descname">chunks_of</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/utils.html#chunks_of"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.chunks_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits up a list or sequence in to chunks of selected size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A sequence eg a list</p></li>
<li><p><strong>size</strong> – A number</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="getting-started.html" class="btn btn-neutral float-left" title="Getting Started with Dimcli" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Digital Science

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>