

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Modules Reference &mdash; DimCli  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Getting Started with Dimcli" href="getting-started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> DimCli
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started with Dimcli</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.__init__">dimcli.login</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.core.api">dimcli.core.api</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.core.functions">dimcli.core.functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.utils.dim_utils">dimcli.utils.dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.utils.misc_utils">dimcli.utils.miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dimcli.jupyter.magics">dimcli.jupyter.magics</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DimCli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Modules Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modules-reference">
<h1>Modules Reference<a class="headerlink" href="#modules-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-dimcli.__init__">
<span id="dimcli-login"></span><h2>dimcli.login<a class="headerlink" href="#module-dimcli.__init__" title="Permalink to this headline">¶</a></h2>
<p>Dimcli utilities for logging in/out of the Dimensions API.
NOTE: these functions are attached to the top level <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> module. So you can load them as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py function">
<dt id="dimcli.__init__.login">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">endpoint</span><span class="o">=</span><span class="default_value">'https://app.dimensions.ai'</span></em>, <em class="sig-param"><span class="n">instance</span><span class="o">=</span><span class="default_value">'live'</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Login into the Dimensions API and store the query token in memory.</p>
<p>Two cases:</p>
<ul class="simple">
<li><p>If credentials are not passed, login is attempted using the local dsl.ini credentials file.</p></li>
<li><p>If Google COLAB is detected and user/psw is not available, the interactive login workflow is triggered</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<em>str</em><em>, </em><em>optional</em>) – The API username</p></li>
<li><p><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The API password</p></li>
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>optional</em>) – The API endpoint - default is “<a class="reference external" href="https://app.dimensions.ai">https://app.dimensions.ai</a>”</p></li>
<li><p><strong>instance</strong> (<em>str</em><em>, </em><em>optional</em>) – The instance name, from the local dsl.ini credentials file. Default: ‘live’</p></li>
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The API key (available to some users instead of username/password)</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Verbose mode. Default: True.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>If you have already set up the credentials file (see above), no need to pass log in details</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
<p>Otherwise you can authenticate by passing your login details as arguments</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can specify endpoint, which by default is set to “<a class="reference external" href="https://app.dimensions.ai">https://app.dimensions.ai</a>”</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">,</span> <span class="n">ednpoint</span><span class="o">=</span><span class="s2">&quot;https://nannies-research.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you use key based authentication, then do</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;my-secret-key&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://your-url.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.__init__.login_status">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">login_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#login_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.login_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility to check whether we are logged in or not</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if logged in, otherwise False.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login_status</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.__init__.logout">
<code class="sig-prename descclassname">dimcli.__init__.</code><code class="sig-name descname">logout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/__init__.html#logout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.__init__.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the connection to the Dimensions API.</p>
<p>This allows to create a new connection subsequently, eg to a different endpoint.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-dimcli.core.api">
<span id="dimcli-core-api"></span><h2>dimcli.core.api<a class="headerlink" href="#module-dimcli.core.api" title="Permalink to this headline">¶</a></h2>
<p>Dimcli objects for querying the Dimensions API.
NOTE: these objects are attached to the top level <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> module. So you can load them as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt id="dimcli.core.api.Dsl">
<em class="property">class </em><code class="sig-prename descclassname">dimcli.core.api.</code><code class="sig-name descname">Dsl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Dsl object is the main interface for interacting with the Dimensions API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Set a global setting that determines whether query JSON results get printed out. Note that in Jupyter environments this is not needed, because iPython rich widgets are used by default.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search grants for &quot;graphene&quot; return researchers&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">&lt;dimcli.dimensions.DslDataset object&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">.</span><span class="n">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;researchers&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;ur.01332073522.49&#39;</span><span class="p">,</span>
<span class="go">        &#39;count&#39;: 75,</span>
<span class="go">        &#39;last_name&#39;: &#39;White&#39;,</span>
<span class="go">        &#39;first_name&#39;: &#39;Nicholas J&#39;},</span>
<span class="go">    &quot;... JSON data continues ... &quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dimcli.core.api.Dsl.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">retry</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a single DSL query.</p>
<p>This method handles the query token from the API and regenerates it if it’s expired. If the API throws a ‘Too Many Requests for the Server’ error, the method sleeps 30 seconds before retrying.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=None</em>) – Setting that determines whether the query JSON results should be printed out. If None, it inherits from the Dsl global setting. Note that in Jupyter environments this is not needed, because iPython rich widgets are used by default.</p></li>
<li><p><strong>retry</strong> (<em>int</em><em>, </em><em>default=0</em>) – Number of times to retry the query if it fails.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=None</em>) – Verbose mode. If None, it inherits from the Dsl global setting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search grants where start_year=2020 return grants&quot;</span><span class="p">)</span>
<span class="go">&lt;dimcli.dimensions.DslDataset object&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.Dsl.query_iterative">
<code class="sig-name descname">query_iterative</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">show_results</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">skip</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pause</span><span class="o">=</span><span class="default_value">1.5</span></em>, <em class="sig-param"><span class="n">force</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">maxlimit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_tot_count_prev_query</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">_warnings_tot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#Dsl.query_iterative"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.Dsl.query_iterative" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a DSL query and then keep querying until all matching records have been extracted.</p>
<p>The API returns a maximum of 1000 records per call. If a DSL query results in more than 1000 matches, it is possible to use pagination to get more results.</p>
<p>Iterative querying works by automatically paginating through all records available for a result set. The original query gets turned into a loop that uses the <cite>limit</cite> / <cite>skip</cite> operators until all the results available have been extracted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>q</strong> (<em>str</em>) – The DSL query. Important: pagination keywords eg <cite>limit</cite> / <cite>skip</cite> should be omitted.</p></li>
<li><p><strong>show_results</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Determines whether the final results are rendered via the iPython display widget (for Jupyter notebooks).</p></li>
<li><p><strong>limit</strong> (<em>int</em><em>, </em><em>default=1000</em>) – How many records to extract per iteration. Defaults to 1000.</p></li>
<li><p><strong>skip</strong> (<em>int</em><em>, </em><em>default=0</em>) – Offset for first iteration. Defaults to 0. After the first iteration, this value is calculated dynamically.</p></li>
<li><p><strong>pause</strong> (<em>float</em><em>, </em><em>default=1.5s</em>) – How much time to pause after each iterarion, expressed in seconds. Defaults to 1.5. Note: each iteration gets timed, so the pause time is used only when the query time is more than 2s.</p></li>
<li><p><strong>force</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Continue the extraction even if one of the iterations fails due to an error.</p></li>
<li><p><strong>maxlimit</strong> (<em>int</em><em>, </em><em>default=0</em>) – The maximum number of records to extract in total. If 0, all available records are extracted, up to the API upper limit of 50k records per query.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Verbose mode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span><span class="o">.</span><span class="n">query_iterative</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search grants where category_for.name=&quot;0206 Quantum Physics&quot; return grants&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Starting iteration with limit=1000 skip=0 ...</span>
<span class="go">0-1000 / 8163 (4.062144994735718s)</span>
<span class="go">1000-2000 / 8163 (1.5146172046661377s)</span>
<span class="go">2000-3000 / 8163 (1.7225260734558105s)</span>
<span class="go">3000-4000 / 8163 (1.575329065322876s)</span>
<span class="go">4000-5000 / 8163 (1.521540880203247s)</span>
<span class="go">5000-6000 / 8163 (1.471721887588501s)</span>
<span class="go">6000-7000 / 8163 (1.5068159103393555s)</span>
<span class="go">7000-8000 / 8163 (1.4724757671356201s)</span>
<span class="go">8000-8163 / 8163 (0.7611980438232422s)</span>
<span class="go">===</span>
<span class="go">Records extracted: 8163</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dimcli.core.api.DslDataset">
<em class="property">class </em><code class="sig-prename descclassname">dimcli.core.api.</code><code class="sig-name descname">DslDataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">IPython.core.display.JSON</span></code></p>
<p>Wrapper for JSON results from DSL.</p>
<p>This object makes it easier to process, save and load API JSON data.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;machine learning&quot; return publications limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 20 (total = 2501114)</span>
<span class="go">Time: 1.36s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4383191536. Records: 100/2501114&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">count_batch</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">count_total</span>
<span class="go">2501114</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">json</span>
<span class="go">#  =&gt; returns the underlying JSON data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;publications&#39;</span><span class="p">]</span>
<span class="go">#  =&gt; shortcut for the &#39;publications&#39; key in the underlying JSON data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">publications</span>
<span class="go">#  =&gt; ..this is valid too!</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe">
<code class="sig-name descname">as_dataframe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame.</p>
<p>If <cite>key</cite> is empty, the first available JSON key (eg ‘publications’) is used to determine
what JSON data should be turned into a dataframe (mostly relevant when using multi-result DSL queries).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The JSON results data object that needs to be processed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_authors">
<code class="sig-name descname">as_dataframe_authors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_authors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a publication author.</p>
<p>This method works only with ‘publications’ queries and it’s clever enough to know if the <cite>authors</cite> or <cite>author_affiliations</cite> (deprecated) fields are used. The list of affiliations per each author are not broken down and are returned as JSON. So in essence you get one row per author.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_authors_affiliations">
<code class="sig-name descname">as_dataframe_authors_affiliations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_authors_affiliations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_authors_affiliations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a publication affiliation.</p>
<p>This method works only with ‘publications’ queries and it’s clever enough to know if the <cite>authors</cite> or <cite>author_affiliations</cite> (deprecated) fields are used. If an author has multiple affiliations, they would be represented in different rows (hence the same authors may appear on different rows).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_concepts">
<code class="sig-name descname">as_dataframe_concepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_concepts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_concepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘concept’.</p>
<p>This method works only with ‘publications’ and ‘grants’ queries and it’s clever enough to know if the <cite>concepts</cite> or <cite>concepts_scores</cite> fields are used. Additional metrics like ‘frequency’ and ‘score_average’ are also included in the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_funders">
<code class="sig-name descname">as_dataframe_funders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_funders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_funders" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘funder’.</p>
<p>This method works only with ‘grants’ queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dataframe_investigators">
<code class="sig-name descname">as_dataframe_investigators</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dataframe_investigators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dataframe_investigators" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON data as a Pandas DataFrame, in which each row corresponds to a single ‘investigator’.</p>
<p>This method works only with ‘grants’ queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A DataFrame instance containing API records.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>See <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html</a></p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.as_dimensions_url">
<code class="sig-name descname">as_dimensions_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">records</span><span class="o">=</span><span class="default_value">500</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.as_dimensions_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.as_dimensions_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that turns a list of records into a Dimensions webapp URL, by using the record IDs as filters.</p>
<p>NOTE: this functionality is EXPERIMENTAL and may break or be removed in future versions. Also, it works only with: publications, grants, patents, clinical_trials, policy_documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>records</strong> (<em>int</em><em>, </em><em>default=500</em>) – The number of record IDs to use. With more than 500, it is likely to incur into a ‘414 Request-URI Too Large’ error.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string representing a Dimensions URL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where id in [&quot;pub.1120715293&quot;, &quot;pub.1120975084&quot;, &quot;pub1122068834&quot;, &quot;pub.1120602308&quot;] return publications&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">as_dimensions_url</span><span class="p">()</span>
<span class="go">&#39;https://app.dimensions.ai/discover/publication?search_text=id%3A+%28pub.1120975084+OR+pub.1120715293+OR+pub.1120602308%29&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.chunks">
<code class="sig-name descname">chunks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">400</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator for going through chunks of the JSON results.</p>
<p>Note: in DSL queries with multiple <cite>return</cite> statements it is better to specify which result-type needs to be chunked using the <cite>key</cite> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>default=400</em>) – Number of objects (records) to include in each chunk.</p></li>
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – The JSON results data object that needs to be chunked eg ‘publications’ or ‘grants’. If not specified, the first available dict key is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A iterator object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>iterator</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Break up a 1000 records dataset into groups of 100.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dslquery</span><span class="p">(</span><span class="s2">&quot;search publications return publications limit 1000&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">chunks</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.count_batch">
<em class="property">property </em><code class="sig-name descname">count_batch</code><a class="headerlink" href="#dimcli.core.api.DslDataset.count_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of results returned from the query.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.count_total">
<em class="property">property </em><code class="sig-name descname">count_total</code><a class="headerlink" href="#dimcli.core.api.DslDataset.count_total" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of results in Dimensions for the query (as opposed to the results returned in the JSON payload).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.errors_string">
<em class="property">property </em><code class="sig-name descname">errors_string</code><a class="headerlink" href="#dimcli.core.api.DslDataset.errors_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that merges all errors messages into a single string.</p>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_clinical_trials_list">
<em class="property">classmethod </em><code class="sig-name descname">from_clinical_trials_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_clinical_trials_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_clinical_trials_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw clinical_trials data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A clinical_trials list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_grants_list">
<em class="property">classmethod </em><code class="sig-name descname">from_grants_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_grants_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_grants_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw grants data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A grants list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_organizations_list">
<em class="property">classmethod </em><code class="sig-name descname">from_organizations_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_organizations_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_organizations_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw organizations data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – An organizations list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_patents_list">
<em class="property">classmethod </em><code class="sig-name descname">from_patents_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_patents_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_patents_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw patents data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A patents list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_policy_documents_list">
<em class="property">classmethod </em><code class="sig-name descname">from_policy_documents_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_policy_documents_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_policy_documents_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw policy_documents data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A policy_documents list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_publications_list">
<em class="property">classmethod </em><code class="sig-name descname">from_publications_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_publications_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_publications_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw publications data.</p>
<p>This functionality can be used to reload data that was cached locally, or to combine the merged results of separate API queries into a single DslDataset object.</p>
<p>Once created, the DslDataset object has the same exact behaviour as when it is obtained from an API query (so one can take advatange of dataframe creation methods, for example).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A list of publications, in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rawdata</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search publications return publications&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">publications</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">rawdata</span><span class="p">)</span>
<span class="go">list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newDataset</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">DslDataset</span><span class="o">.</span><span class="n">from_publications_list</span><span class="p">(</span><span class="n">rawdata</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newDataset</span>
<span class="go">&lt;dimcli.DslDataset object #4767014816. Records: 20/20&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.from_researchers_list">
<em class="property">classmethod </em><code class="sig-name descname">from_researchers_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.from_researchers_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.from_researchers_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method that allows to simulate an API results DslDataset object from raw researchers data. See the <cite>from_publications_list</cite> method for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em> or </em><em>pandas dataframe</em>) – A researchers list (using the API DSL structure), in the form of either a list of dictionaries, or as a pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.good_data_keys">
<code class="sig-name descname">good_data_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.good_data_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.good_data_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that returns the ‘data’ keys of the inner JSON object, excluding metadata like ‘stats’, ‘warnings’ and ‘version’ info.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of dictionary keys.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">queryresults</span><span class="o">.</span><span class="n">good_data_keys</span><span class="p">()</span>
<span class="go">[&#39;publications&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.keys_and_count">
<code class="sig-name descname">keys_and_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.keys_and_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.keys_and_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility that previews the contents of the inner JSON object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of tuples.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">queryresults</span><span class="o">.</span><span class="n">keys_and_count</span><span class="p">()</span>
<span class="go">[(&#39;_stats&#39;, 3), (&#39;_warnings&#39;, 1), (&#39;_version&#39;, 2), (&#39;publications&#39;, 100)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.load_json_file">
<em class="property">classmethod </em><code class="sig-name descname">load_json_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.load_json_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.load_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a file containing DSL JSON data and returns a valid DslDataset object.</p>
<p>Note: this is normally used in combination with the <cite>to_json_file</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – A valid filename (including path if necessary) that contains the JSON data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Save the results of a query to a JSON file, then reload the same file and create a new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where journal.title=&quot;nature medicine&quot; return publications[id+title+year+concepts] limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 100 (total = 12641)</span>
</pre></div>
</div>
<p>Save the data to a local json file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s2">&quot;test-api-save.json&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Saved to file:  test-api-save.json</span>
</pre></div>
</div>
<p>Create a new DslDataset object by loading the contents of the JSON file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span> <span class="o">=</span> <span class="n">DslDataset</span><span class="o">.</span><span class="n">load_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Loaded file:  test-api-save.json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4370267824. Records: 100/12641&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.to_gsheets">
<code class="sig-name descname">to_gsheets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.to_gsheets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.to_gsheets" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the dataframe version of some API results to a public google sheet. Google OAUTH client credentials are a prerequisite for this method to work correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – The spreadsheet title, if one wants to reuse an existing spreadsheet.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method assumes that the calling environment can provide valid Google authentication credentials.
There are two routes to make this work, depending on whether one is using Google Colab or a traditional Jupyter environment.</p>
<p><strong>Google Colab</strong>
This is the easiest route. In Google Colab, all required libraries are already available. The <cite>to_gsheets</cite> method simply triggers the built-in authentication process via a pop up window.</p>
<p><strong>Jupyter</strong>
This route involves a few more steps. In Jupyter, it is necessary to install the gspread, oauth2client and gspread_dataframe modules first. Secondly, one needs to create Google Drive access credentials using OAUTH (which boils down to a JSON file). Note that the credentials file needs to be saved in: <cite>~/.config/gspread/credentials.json</cite> (for gpread).
The steps are described at <a class="reference external" href="https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id">https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The google sheet URL as a string.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dimcli.core.api.DslDataset.to_json_file">
<code class="sig-name descname">to_json_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/api.html#DslDataset.to_json_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.api.DslDataset.to_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Export API results data to a JSON file.</p>
<p>Note: this is normally used in combination with the <cite>load_json_file</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em><em>, </em><em>optional</em>) – A filename/path where to save the data. If not provided, a unique name is generated automatically.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string representation of the filename the data is saved to.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Save the results of a query to a JSON file, then reload the same file and create a new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications where journal.title=&quot;nature medicine&quot; return publications[id+title+year+concepts] limit 100&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">Returned Publications: 100 (total = 12641)</span>
</pre></div>
</div>
<p>Save the data to a local json file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s2">&quot;test-api-save.json&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Saved to file:  test-api-save.json</span>
</pre></div>
</div>
<p>Data can be reloaded from file, using the <cite>load_json_file</cite> class method.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span> <span class="o">=</span> <span class="n">DslDataset</span><span class="o">.</span><span class="n">load_json_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Loaded file:  test-api-save.json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="p">)</span>
<span class="go">&lt;dimcli.DslDataset object #4370267824. Records: 100/12641&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-dimcli.core.functions">
<span id="dimcli-core-functions"></span><h2>dimcli.core.functions<a class="headerlink" href="#module-dimcli.core.functions" title="Permalink to this headline">¶</a></h2>
<p>Python wrappers for the DSL functions.
See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/functions.html">https://docs.dimensions.ai/dsl/functions.html</a>
NOTE: these objects are attached to the top level <code class="docutils literal notranslate"><span class="pre">dimcli.functions</span></code> module. So you can load them as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<dl class="py function">
<dt id="dimcli.core.functions.build_reviewers_matrix">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">build_reviewers_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">abstracts</span></em>, <em class="sig-param"><span class="n">candidates</span></em>, <em class="sig-param"><span class="n">max_concepts</span><span class="o">=</span><span class="default_value">15</span></em>, <em class="sig-param"><span class="n">connector</span><span class="o">=</span><span class="default_value">'OR'</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'publications'</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#build_reviewers_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.build_reviewers_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a matrix of candidate reviewers for abstracts, using the expert identification workflow. See also <a class="reference external" href="https://docs.dimensions.ai/dsl/expert-identification.html">https://docs.dimensions.ai/dsl/expert-identification.html</a></p>
<p>If the input abstracts include identifiers, then those are used in the resulting matrix.
Alternatively, a simple list of strings as input will result in a matrix where the identifiers are auto-generated from the abstracts order (first one is 1, etc..).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abstracts</strong> (<em>list</em>) – The list of abstracts used for matching reviewers. Should be either a list of strings, or a list of dictionaries <code class="docutils literal notranslate"><span class="pre">{'id'</span> <span class="pre">:</span> <span class="pre">'{unique-ID}',</span> <span class="pre">'text'</span> <span class="pre">:</span> <span class="pre">'{the-abstract}'}</span></code> including a unique identifier for each abstract.</p></li>
<li><p><strong>candidates</strong> (<em>list</em>) – A list of Dimensions researchers IDs.</p></li>
<li><p><strong>max_concepts</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum number of concepts to use for the matching. By default, this is 15. Concepts are ranked by relevance.</p></li>
<li><p><strong>connector</strong> (<em>str</em><em>, </em><em>optional</em>) – The logical connector used in the concepts query. Should be either ‘AND’, or ‘OR’ (=default).</p></li>
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>optional</em>) – The DSL source to derive experts from. Either ‘publications’ (default) or ‘grants’.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Verbose mode, by default False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dataframe containing experts details, including the dimensions URL of the experts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">build_reviewers_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abstracts</span> <span class="o">=</span> <span class="p">[</span>
<span class="go">...:     {</span>
<span class="go">...:     &#39;id&#39; : &#39;A1&#39;,</span>
<span class="go">...:     &#39;text&#39; : We describe monocrystalline graphitic films, which are a few atoms thick but are nonetheless stable under ambient conditions,</span>
<span class="go">...: metallic, and of remarkably high quality. The films are found to be a two-dimensional semimetal with a tiny overlap between</span>
<span class="go">...: valence and conductance bands, and they exhibit a strong ambipolar electric field effect such that electrons and</span>
<span class="go">...: holes in concentrations up to 10 per square centimeter and with room-temperature mobilities of approximately 10,000 square</span>
<span class="go">...: centimeters per volt-second can be induced by applying gate voltage.&quot;</span>
<span class="go">...:     },</span>
<span class="go">...:     {</span>
<span class="go">...:     &#39;id&#39; : &quot;A2&quot;,</span>
<span class="go">...:     &#39;text&#39; : &quot;&quot;The physicochemical properties of a molecule-metal interface, in principle, can play a significant role in tuning the electronic properties</span>
<span class="go">...: of organic devices. In this report, we demonstrate an electrode engineering approach in a robust, reproducible molecular memristor that</span>
<span class="go">...: enables a colossal tunability in both switching voltage (from 130 mV to 4 V i.e. &gt;2500% variation) and current (by ~6 orders of magnitude).</span>
<span class="go">...: This provides a spectrum of device design parameters that can be “dialed-in” to create fast, scalable and ultralow energy organic</span>
<span class="go">...: memristors optimal for applications spanning digital memory, logic circuits and brain-inspired computing.&quot;</span>
<span class="go">...:     }</span>
<span class="go">...: ]</span>
<span class="go">...:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ur.01146544531.57&quot;</span><span class="p">,</span> <span class="s2">&quot;ur.011535264111.51&quot;</span><span class="p">,</span> <span class="s2">&quot;ur.0767105504.29&quot;</span><span class="p">,</span>
<span class="go">...:               &quot;ur.011513332561.53&quot;, &quot;ur.01055006635.53&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">build_reviewers_matrix</span><span class="p">(</span><span class="n">abstracts</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span>
<span class="go">           researcher         A1        A2</span>
<span class="go">0   ur.01146544531.57   8.185277  0.000000</span>
<span class="go">1  ur.011535264111.51   8.203130  0.000000</span>
<span class="go">2    ur.0767105504.29   8.686363  2.626348</span>
<span class="go">3  ur.011513332561.53  12.920304  1.551920</span>
<span class="go">4   ur.01055006635.53   6.756862  1.797738</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.core.functions.extract_affiliations">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">extract_affiliations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">affiliations</span></em>, <em class="sig-param"><span class="n">as_json</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#extract_affiliations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.extract_affiliations" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for the DSL function <cite>extract_affiliations</cite>.</p>
<p>This function returns GRID affiliations either using structured or unstructured input. Up to 200 input objects are allowed per request. See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/functions.html#function-extract-affiliations">https://docs.dimensions.ai/dsl/functions.html#function-extract-affiliations</a></p>
<p>The input argument <code class="docutils literal notranslate"><span class="pre">affiliations</span></code> can be one of the following:</p>
<ul>
<li><p>a string, representing a single <strong>unstructured</strong> ‘affiliation’, eg</p>
<blockquote>
<div><p>“new york university”</p>
</div></blockquote>
</li>
<li><p>a list of strings, representing <strong>unstructured</strong> ‘affiliations’, eg</p>
<blockquote>
<div><p>[“new york university”, “london college of surgeons”]</p>
</div></blockquote>
</li>
<li><p>a list of dictionaries of <strong>unstructured</strong> ‘affiliations’ data, eg</p>
<blockquote>
<div><p>[{“affiliation”: “london college”}, {“affiliation”: “new york university”}]</p>
</div></blockquote>
</li>
<li><p>a list of dictionaries of <strong>structured</strong> ‘affiliations’ data, eg</p>
<blockquote>
<div><p>[{“name”:”london college cambridge”,
“city”:””,
“state”:””,
“country”:””},
{“name”:”milano bicocca”,
“city”:”Milano”,
“state”:””,
“country”:”Italy”}
]</p>
</div></blockquote>
</li>
</ul>
<p>By default, the JSON results are flattened and returned as a pandas dataframe.</p>
<p><strong>NOTE</strong> internally this function always uses the ‘batch processing’ version of the API. The optional argument <cite>results</cite> is currently not supported (and hence defaults to ‘basic’).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>affiliations</strong> (<em>str</em><em> or </em><em>list</em><em> or </em><em>dict</em>) – The raw affiliation data to process.</p></li>
<li><p><strong>as_json</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return raw JSON encoded as a Python dict (instead of a pandas dataframe, by default).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing a flattened representation of the JSON results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame or dict</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">extract_affiliations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_affiliations</span><span class="p">(</span><span class="s2">&quot;stanford medical center&quot;</span><span class="p">)</span>
<span class="go">n  affiliation_part        grid_id          grid_name grid_city  grid_state   grid_country  requires_review geo_country_id geo_country_name geo_country_code geo_state_id geo_state_name geo_state_code geo_city_id geo_city_name</span>
<span class="go">0  stanford medical center  grid.240952.8  Stanford Medicine  Stanford  California  United States             True        6252001    United States               US      5332921     California          US-CA     5398563      Stanford</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;london college&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;new york university&quot;</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_affiliations</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">n  affiliation_part        grid_id            grid_name grid_city grid_state    grid_country  requires_review geo_country_id geo_country_name geo_country_code geo_state_id geo_state_name geo_state_code geo_city_id  geo_city_name</span>
<span class="go">0  london college  grid.499389.6   The London College    London       None  United Kingdom             True        2635167   United Kingdom               GB      6269131        England           None     2643743         London</span>
<span class="go">1  new york university  grid.137628.9  New York University  New York   New York   United States            False        6252001    United States               US      5128638       New York          US-NY     5128581  New York City</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.core.functions.extract_classification">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">extract_classification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">title</span></em>, <em class="sig-param"><span class="n">abstract</span></em>, <em class="sig-param"><span class="n">system</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#extract_classification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.extract_classification" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for the DSL function <cite>classify</cite>.</p>
<p>This function retrieves suggested classifications codes for any text. See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/functions.html#function-classify">https://docs.dimensions.ai/dsl/functions.html#function-classify</a></p>
<p>NOTE <cite>system</cite> must be the acronym of one of the supported classification systems:</p>
<ul class="simple">
<li><p>Fields of Research (FOR)</p></li>
<li><p>Research, Condition, and Disease Categorization (RCDC)</p></li>
<li><p>Health Research Classification System Health Categories (HRCS_HC)</p></li>
<li><p>Health Research Classification System Research Activity Classifications (HRCS_RAC)</p></li>
<li><p>Health Research Areas (HRA)</p></li>
<li><p>Broad Research Areas (BRA)</p></li>
<li><p>ICRP Common Scientific Outline (ICRP_CSO)</p></li>
<li><p>ICRP Cancer Types (ICRP_CT)</p></li>
<li><p>Units of Assessment (UOA)</p></li>
<li><p>Sustainable Development Goals (SDG)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – The title of the document to classify.</p></li>
<li><p><strong>abstract</strong> (<em>str</em>) – The abstract of the document to classify.</p></li>
<li><p><strong>system</strong> (<em>str</em><em>, </em><em>optional</em>) – The classification system to use. Either an acronym from the supported classification systems, or null. If no system is provided, all systems are attempted in sequence (one query per system).</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Verbose mode, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dimcli.DslDataset</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">extract_classification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Burnout and intentions to quit the practice among community pediatricians: associations with specific professional activities&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_classification</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;FOR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span>
<span class="go">{&#39;FOR&#39;: [{&#39;id&#39;: &#39;3177&#39;, &#39;name&#39;: &#39;1117 Public Health and Health Services&#39;}]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.core.functions.extract_concepts">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">extract_concepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">scores</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">as_df</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#extract_concepts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.extract_concepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for the DSL function <cite>extract_concepts</cite>.</p>
<p>Extract concepts from any text. Text input is processed and extracted concepts are returned as an array of strings ordered by their relevance. See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/functions.html#function-extract-concepts">https://docs.dimensions.ai/dsl/functions.html#function-extract-concepts</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – The text paragraphs to extract concepts from.</p></li>
<li><p><strong>scores</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return the concepts scores as well, by default True</p></li>
<li><p><strong>as_df</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return results as a pandas dataframe (instead of JSON), by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of concepts that have been extracted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe or dimcli.DslDataset</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">extract_concepts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_concepts</span><span class="p">(</span><span class="s2">&quot;The impact of solar rays on the moon is not trivial.&quot;</span><span class="p">)</span>
<span class="go">n   concept relevance</span>
<span class="go">0   impact  0.070622</span>
<span class="go">1   rays    0.062369</span>
<span class="go">2   solar rays      0.022934</span>
<span class="go">3   Moon    0.013245</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.core.functions.extract_grants">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">extract_grants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grant_number</span></em>, <em class="sig-param"><span class="n">fundref</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">funder_name</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#extract_grants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.extract_grants" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for the DSL function <cite>extract_grants</cite>.</p>
<p>Extract grant Dimensions ID from provided parameters. Grant number must be provided with either a fundref or a funder name as an argument. See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/functions.html#function-extract-grants">https://docs.dimensions.ai/dsl/functions.html#function-extract-grants</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grant_number</strong> (<em>str</em>) – The grant number/ID</p></li>
<li><p><strong>fundref</strong> (<em>str</em><em>, </em><em>optional</em>) – Fundref name</p></li>
<li><p><strong>funder_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Funder name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dimcli.DslDataset</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">extract_grants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_grants</span><span class="p">(</span><span class="s2">&quot;R01HL117329&quot;</span><span class="p">,</span>  <span class="n">fundref</span><span class="o">=</span><span class="s2">&quot;100000050&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span>
<span class="go">{&#39;grant_id&#39;: &#39;grant.2544064&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.core.functions.identify_experts">
<code class="sig-prename descclassname">dimcli.core.functions.</code><code class="sig-name descname">identify_experts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">abstract</span></em>, <em class="sig-param"><span class="n">max_concepts</span><span class="o">=</span><span class="default_value">15</span></em>, <em class="sig-param"><span class="n">connector</span><span class="o">=</span><span class="default_value">'OR'</span></em>, <em class="sig-param"><span class="n">conflicts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_dsl</span><span class="o">=</span><span class="default_value">'where year &gt;= 2010'</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'publications'</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/core/functions.html#identify_experts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.core.functions.identify_experts" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for the expert identification workflow. See also <a class="reference external" href="https://docs.dimensions.ai/dsl/expert-identification.html">https://docs.dimensions.ai/dsl/expert-identification.html</a></p>
<p>This wrapper provide a simpler version of the expert identification API. It is meant to be a convenient alternative for basic queries. For more options, it is advised to use the API directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abstract</strong> (<em>str</em>) – The abstract text used to identify experts. Concepts are automatically extracted from it.</p></li>
<li><p><strong>max_concepts</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum number of concepts to use for the identification. By default, this is 15. Concepts are ranked by relevance.</p></li>
<li><p><strong>connector</strong> (<em>str</em><em>, </em><em>optional</em>) – The logical connector used in the concepts query. Should be either ‘AND’, or ‘OR’ (=default).</p></li>
<li><p><strong>conflicts</strong> (<em>list</em><em>, </em><em>optional</em>) – A list of Dimensions researchers IDs used to determine overlap / conflicts of interest.</p></li>
<li><p><strong>extra_dsl</strong> (<em>str</em><em>, </em><em>optional</em>) – A DSL clause to add after the main concepts search statement. Default is <code class="docutils literal notranslate"><span class="pre">where</span> <span class="pre">year</span> <span class="pre">&gt;=</span> <span class="pre">2010</span></code>.</p></li>
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>optional</em>) – The DSL source to derive experts from. Either ‘publications’ (default) or ‘grants’.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Verbose mode, by default False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dataframe containing experts details, including the dimensions URL of the experts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.functions</span> <span class="kn">import</span> <span class="n">identify_experts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">identify_experts</span><span class="p">(</span><span class="s2">&quot;Moon landing paved the way for supercomputers becoming mainstream&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Concepts extracted: 5</span>
<span class="go">Query:</span>
<span class="go">&quot;</span>
<span class="go">identify experts</span>
<span class="go">    from concepts &quot;&quot;landing&quot; OR &quot;way&quot; OR &quot;mainstream&quot; OR &quot;moon landing&quot; OR &quot;supercomputers&quot;&quot;</span>
<span class="go">    using publications where year &gt;= 2010</span>
<span class="go">return experts[all+dimensions_url-obsolete]</span>
<span class="go">&quot;</span>
<span class="go">Experts found: 20</span>
<span class="go">[..experts list..]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-dimcli.utils.dim_utils">
<span id="dimcli-utils-dimensions"></span><h2>dimcli.utils.dimensions<a class="headerlink" href="#module-dimcli.utils.dim_utils" title="Permalink to this headline">¶</a></h2>
<p>Dimcli utilities for querying and working with Dimensions data.
NOTE: these functions are attached to the top level <code class="docutils literal notranslate"><span class="pre">dimcli.utils</span></code> module. So you can load them as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<dl class="py function">
<dt id="dimcli.utils.dim_utils.dimensions_search_url">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dimensions_search_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keywords_list_as_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dimensions_search_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dimensions_search_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a valid keyword search URL for Dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>keywords_list_as_string</strong> (<em>str</em>) – List of search keywords.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Dimensions URL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="n">dimensions_search_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimensions_search_url</span><span class="p">(</span><span class="s2">&quot;graphene AND south korea&quot;</span><span class="p">)</span>
<span class="go">&#39;https://app.dimensions.ai/discover/publication?search_text=graphene%20AND%20south%20korea&amp;search_type=kws&amp;search_field=full_search&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.dim_utils.dimensions_url">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dimensions_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_id</span></em>, <em class="sig-param"><span class="n">obj_type</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dimensions_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dimensions_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a valid Dimensions URL for one of the available sources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj_id</strong> (<em>str</em>) – A Dimensions ID for one of the available sources.</p></li>
<li><p><strong>obj_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the source: one of ‘publications’, ‘grants’, ‘patents’, ‘policy_documents’, ‘clinical_trials’, ‘researchers’. If not provided, it’s inferred using the ID structure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The object URL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="n">dimensions_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimensions_url</span><span class="p">(</span><span class="s2">&quot;pub.1127419018&quot;</span><span class="p">)</span>
<span class="go">&#39;https://app.dimensions.ai/details/publication/pub.1127419018&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.dim_utils.dsl_escape">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dsl_escape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stringa</span></em>, <em class="sig-param"><span class="n">all</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dsl_escape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dsl_escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper for escaping the full-text inner query strings, when they includes quotes.</p>
<p>EG with the query string:
‘“2019-nCoV” OR “COVID-19” OR “SARS-CoV-2” OR ((“coronavirus”  OR “corona virus”) AND (Wuhan OR China))’</p>
<p>In Python, if you want to embed it into a DSL query, it has to become:
‘&quot;2019-nCoV&quot; OR &quot;COVID-19&quot; OR &quot;SARS-CoV-2&quot; OR ((&quot;coronavirus&quot;  OR &quot;corona virus&quot;) AND (Wuhan OR China))’</p>
<p>See also: <a class="reference external" href="https://docs.dimensions.ai/dsl/language.html#for-search-term">https://docs.dimensions.ai/dsl/language.html#for-search-term</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stringa</strong> (<em>str</em>) – Full-text search component of a DSL query.</p></li>
<li><p><strong>all</strong> (<em>bool</em><em>, </em><em>default=False</em>) – By default only quotes as escaped. Set to True to escape all special characters (eg colons)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsl_escape</span><span class="p">(</span><span class="s1">&#39;Solar cells: a new technology?&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;Solar cells\: a new technology?&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.dim_utils.dslquery">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dslquery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dslquery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dslquery" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for running a query without instantiating dimcli.Dsl().</p>
<p>Added for backward compatibility with legacy API tutorials. Requires file-based credentials for logging in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query_string</strong> (<em>str</em>) – A valid DSL query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.dim_utils.dslquery_json">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dslquery_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dslquery_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dslquery_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for running a query without instantiating dimcli.Dsl(). Same as <code class="docutils literal notranslate"><span class="pre">dslquery</span></code> but returns raw JSON instead of Api.DslDataset object</p>
<p>Added for backward compatibility with legacy API tutorials. Requires file-based credentials for logging in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query_string</strong> (<em>str</em>) – A valid DSL query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>API JSON data, represented as a dict object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.dim_utils.dslqueryall">
<code class="sig-prename descclassname">dimcli.utils.dim_utils.</code><code class="sig-name descname">dslqueryall</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/dim_utils.html#dslqueryall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.dim_utils.dslqueryall" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for running a loop query without instantiating dimcli.Dsl().</p>
<p>Added for backward compatibility with legacy API tutorials. Requires file-based credentials for logging in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query_string</strong> (<em>str</em>) – A valid DSL query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-dimcli.utils.misc_utils">
<span id="dimcli-utils-miscellaneous"></span><h2>dimcli.utils.miscellaneous<a class="headerlink" href="#module-dimcli.utils.misc_utils" title="Permalink to this headline">¶</a></h2>
<p>Dimcli general purpose utilities for working with data.
NOTE: these functions are attached to the top level <code class="docutils literal notranslate"><span class="pre">dimcli.utils</span></code> module. So you can import them as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<dl class="py function">
<dt id="dimcli.utils.misc_utils.chunks_of">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">chunks_of</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#chunks_of"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.chunks_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits up a list or sequence in to chunks of selected size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>sequence</em>) – A sequence eg a list that needs to be chunked.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The number of items in each group.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="n">chunks_of</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">chunks_of</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
<span class="go">        print(len(x))</span>
<span class="go">5</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">chunks_of</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="go">[[0, 1, 2, 3, 4], [5, 6, 7, 8, 9]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.exists_key_in_dicts_list">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">exists_key_in_dicts_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict_list</span></em>, <em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#exists_key_in_dicts_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.exists_key_in_dicts_list" title="Permalink to this definition">¶</a></dt>
<dd><p>From a list of dicts, checks if a certain key is in one of the dicts in the list.</p>
<p>See also <a class="reference external" href="https://stackoverflow.com/questions/14790980/how-can-i-check-if-key-exists-in-list-of-dicts-in-python">https://stackoverflow.com/questions/14790980/how-can-i-check-if-key-exists-in-list-of-dicts-in-python</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dict_list</strong> (<em>list</em>) – A list of dictionaries.</p></li>
<li><p><strong>key</strong> (<em>obj</em>) – The obj to be found in dict keys</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.export_as_gsheets">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">export_as_gsheets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_data</span></em>, <em class="sig-param"><span class="n">query</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#export_as_gsheets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.export_as_gsheets" title="Permalink to this definition">¶</a></dt>
<dd><p>Save data to google sheets with one-line.</p>
<p>Works with raw JSON (from API), or even a Dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<em>JSON</em><em> or </em><em>DataFrame</em>) – The data to be uploaded</p></li>
<li><p><strong>query</strong> (<em>str</em>) – The DSL query - this is neeeded only when raw API JSON is passed</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – The spreadsheet title, if one wants to reuse an existing spreadsheet.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Verbose mode</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method assumes that the calling environment can provide valid Google authentication credentials.
There are two routes to make this work, depending on whether one is using Google Colab or a traditional Jupyter environment.</p>
<p><strong>Google Colab</strong>
This is the easiest route. In Google Colab, all required libraries are already available. The <cite>to_gsheets</cite> method simply triggers the built-in authentication process via a pop up window.</p>
<p><strong>Jupyter</strong>
This route involves a few more steps. In Jupyter, it is necessary to install the <code class="docutils literal notranslate"><span class="pre">gspread</span></code>, <code class="docutils literal notranslate"><span class="pre">oauth2client</span></code> and <code class="docutils literal notranslate"><span class="pre">gspread_dataframe</span></code> modules first. Secondly, one needs to create Google Drive access credentials using OAUTH (which boils down to a JSON file). Note that the credentials file needs to be saved in: <cite>~/.config/gspread/credentials.json</cite> (for gpread to work correctly).
These steps are described at <a class="reference external" href="https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id">https://gspread.readthedocs.io/en/latest/oauth2.html#for-end-users-using-oauth-client-id</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The google sheet URL as a string.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="n">export_as_gsheets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cars</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Brand&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Honda Civic&#39;</span><span class="p">,</span><span class="s1">&#39;Toyota Corolla&#39;</span><span class="p">,</span><span class="s1">&#39;Ford Focus&#39;</span><span class="p">,</span><span class="s1">&#39;Audi A4&#39;</span><span class="p">],</span>
<span class="go">             &#39;Price&#39;: [22000,25000,27000,35000]</span>
<span class="go">             }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Brand&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">export_as_gsheets</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">..authorizing with google..</span>
<span class="go">..creating a google sheet..</span>
<span class="go">..uploading..</span>
<span class="go">Saved:</span>
<span class="go">https://docs.google.com/spreadsheets/d/1tsyRFDEsADltWDdqjuyDWDOg81sl9hN3Nu8MXVlqDDI</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.google_url">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">google_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stringa</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#google_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.google_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a valid google search URL from a string (URL quoting is applied).</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="n">google_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">google_url</span><span class="p">(</span><span class="s2">&quot;malaria AND africa&quot;</span><span class="p">)</span>
<span class="go">&#39;https://www.google.com/search?q=malaria%20AND%20africa&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.normalize_key">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">normalize_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key_name</span></em>, <em class="sig-param"><span class="n">dict_list</span></em>, <em class="sig-param"><span class="n">new_val</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#normalize_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.normalize_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures the key always appear in a JSON dict/objects list by adding it when missing.</p>
<p>UPDATE 2019-11-28
v0.6.1.2: normalizes also ‘None’ values (to address 1.21 DSL change)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key_name</strong> (<em>obj</em>) – The dict key to normalize.</p></li>
<li><p><strong>dict_list</strong> (<em>list</em>) – List of dictionaries where to be processed.</p></li>
<li><p><strong>new_val</strong> (<em>obj</em><em>, </em><em>optional</em>) – Default value to add to the key, when not found. If <cite>new_val</cite> is not passed, it is inferred from first available non-empty value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Same dictionary being passed. Changes happen in-place.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pubs_details</span><span class="o">.</span><span class="n">publications</span><span class="p">:</span>
<span class="go">        if not &#39;FOR&#39; in x:</span>
<span class="go">            x[&#39;FOR&#39;] = []</span>
</pre></div>
</div>
<p>becomes simply:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">normalize_key</span><span class="p">(</span><span class="s2">&quot;FOR&quot;</span><span class="p">,</span> <span class="n">pubs_details</span><span class="o">.</span><span class="n">publications</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.open_multi_platform">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">open_multi_platform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fpath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#open_multi_platform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.open_multi_platform" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a file using the native OS tools, taking care of platform differences.</p>
<p>Supports win, macos and linux.</p>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.save2File">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">save2File</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">contents</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#save2File"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.save2File" title="Permalink to this definition">¶</a></dt>
<dd><p>Save string contents to a file, creating the file if it doesn’t exist.</p>
<p>NOTE Not generalized much, so use at your own risk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contents</strong> (<em>str</em>) – File contents</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Full path of the file to save. If not existing, it gets created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The file path with format  “<a class="reference external" href="file://">file://</a>…”</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="dimcli.utils.misc_utils.walk_up">
<code class="sig-prename descclassname">dimcli.utils.misc_utils.</code><code class="sig-name descname">walk_up</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bottom</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/utils/misc_utils.html#walk_up"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.utils.misc_utils.walk_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Mimic os.walk, but walk ‘up’ instead of down the directory tree</p>
<p class="rubric">Example</p>
<p>#print all files and directories
# directly above the current one
&gt;&gt;&gt; for i in walk_up(os.curdir):
&gt;&gt;&gt;    print(i)</p>
<p># look for a TAGS file above the
# current directory
&gt;&gt;&gt; for c,d,f in walk_up(os.curdir):
&gt;&gt;&gt;    if ‘TAGS’ in f:
&gt;&gt;&gt;        print(c)
&gt;&gt;&gt;        break</p>
</dd></dl>

</div>
<div class="section" id="module-dimcli.jupyter.magics">
<span id="dimcli-jupyter-magics"></span><h2>dimcli.jupyter.magics<a class="headerlink" href="#module-dimcli.jupyter.magics" title="Permalink to this headline">¶</a></h2>
<p>Dimcli magic commands used with iPython / Jupyter environments only. See also: <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/4-Dimcli-magic-commands.html">https://api-lab.dimensions.ai/cookbooks/1-getting-started/4-Dimcli-magic-commands.html</a></p>
<p>NOTE All magic commands results get saved automatically to a variable named <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="py class">
<dt id="dimcli.jupyter.magics.DslMagics">
<em class="property">class </em><code class="sig-prename descclassname">dimcli.jupyter.magics.</code><code class="sig-name descname">DslMagics</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">IPython.core.magic.Magics</span></code></p>
<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dsl">
<code class="sig-name descname">dsl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dsl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dsl" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a single DSL query.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dsl</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dsl</span></code>) command. Requires an authenticated API session. Results are saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dsl</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="k">return</span> <span class="n">publications</span> <span class="n">limit</span> <span class="mi">500</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dsldf">
<code class="sig-name descname">dsldf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dsldf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dsldf" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a single DSL query, results are transformed to a Pandas DataFrame.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dsldf</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dsldf</span></code>) command. Requires an authenticated API session. Results are saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing the query results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dsldf</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="k">return</span> <span class="n">publications</span> <span class="n">limit</span> <span class="mi">500</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dsldocs">
<code class="sig-name descname">dsldocs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dsldocs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dsldocs" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to get DSL documentation about sources and fields.</p>
<p>This is a wrapper around the DSL <cite>describe</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em><em>, </em><em>optional</em>) – The DSL source or entity name to get documentation for. If omitted, all the documentation is downloaded.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing the query results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dsldocs</span> <span class="n">publications</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dslgsheets">
<code class="sig-name descname">dslgsheets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dslgsheets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dslgsheets" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a single DSL query and to save the results to a google sheet.</p>
<p>NOTE: this method requires preexisting valid Google authentication credentials. See the description of <code class="docutils literal notranslate"><span class="pre">utils.export_as_gsheets</span></code> for more information.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dslgsheets</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dslgsheets</span></code>) command. Requires an authenticated API session. Results are also saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string representing the google sheet URL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dslgsheets</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="k">return</span> <span class="n">publications</span> <span class="n">limit</span> <span class="mi">500</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dslloop">
<code class="sig-name descname">dslloop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dslloop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dslloop" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a DSL ‘loop’ (iterative) query.</p>
<p>This command automatically loops over all the pages of a results set, until all possible records have been returned.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dslloop</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dslloop</span></code>) command. Requires an authenticated API session. Results are saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query. Should not include limit/skip clauses, as those are added automatically during the iterations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dimcli wrapper object containing JSON data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dimcli.core.api.DslDataset" title="dimcli.core.api.DslDataset">DslDataset</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dslloop</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="n">where</span> <span class="n">times_cited</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="k">return</span> <span class="n">publications</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dslloopdf">
<code class="sig-name descname">dslloopdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dslloopdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dslloopdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a DSL ‘loop’ (iterative) query. Results are automatically transformed to a pandas dataframe.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dslloopdf</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dslloopdf</span></code>) command. Requires an authenticated API session. Results are saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query. Should not include limit/skip clauses, as those are added automatically during the iterations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing the query results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dslloopdf</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="n">where</span> <span class="n">times_cited</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="k">return</span> <span class="n">publications</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.dslloopgsheets">
<code class="sig-name descname">dslloopgsheets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.dslloopgsheets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.dslloopgsheets" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run a DSL ‘loop’ (iterative) query. Results are automatically uploaded to google sheets.</p>
<p>NOTE: this method requires preexisting valid Google authentication credentials. See also <a class="reference external" href="https://gspread.readthedocs.io/en/latest/oauth2.html">https://gspread.readthedocs.io/en/latest/oauth2.html</a> and the description of <code class="docutils literal notranslate"><span class="pre">utils.export_as_gsheets</span></code> for more information.</p>
<p>Can be used as a single-line (<code class="docutils literal notranslate"><span class="pre">%dslloopgsheets</span></code>) or multi-line (<code class="docutils literal notranslate"><span class="pre">%%dslloopgsheets</span></code>) command. Requires an authenticated API session. Results are also saved to a variable called <code class="docutils literal notranslate"><span class="pre">dsl_last_results</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – A valid DSL search query. Should not include limit/skip clauses, as those are added automatically during the iterations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing the query results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">dslloopdf</span> <span class="n">search</span> <span class="n">publications</span> <span class="k">for</span> <span class="s2">&quot;malaria&quot;</span> <span class="n">where</span> <span class="n">times_cited</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="k">return</span> <span class="n">publications</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.extract_concepts">
<code class="sig-name descname">extract_concepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.extract_concepts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.extract_concepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run the <cite>extract_concepts</cite> function. Results are transformed to a Pandas DataFrame. Score are included by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cell</strong> (<em>str</em>) – Text to extract concepts from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing the concepts and scores.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%%</span><span class="n">extract_concepts</span>
<span class="gp">... </span><span class="o">&lt;</span><span class="n">text</span><span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dimcli.jupyter.magics.DslMagics.identify_experts">
<code class="sig-name descname">identify_experts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dimcli/jupyter/magics.html#DslMagics.identify_experts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dimcli.jupyter.magics.DslMagics.identify_experts" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic command to run the <cite>identify_experts</cite> function. Uses all the default options, takes only the <cite>abstract</cite> argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cell</strong> (<em>str</em>) – Text abstract to use to find experts.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pandas dataframe containing experts details.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%%</span><span class="n">identify_experts</span>
<span class="gp">... </span><span class="o">&lt;</span><span class="n">text</span><span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="getting-started.html" class="btn btn-neutral float-left" title="Getting Started with Dimcli" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Digital Science

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>