

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started with Dimcli &mdash; DimCli  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modules Reference" href="modules.html" />
    <link rel="prev" title="Welcome to DimCli’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> DimCli
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started with Dimcli</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#in-a-nutshell">In a nutshell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anaconda-users">Anaconda users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-credentials-file-using-the-helper-script-recommended">Creating a credentials file using the helper script (recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-credentials-file-manually">Creating a credentials file manually</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#important">Important</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#overriding-credentials-at-runtime-e-g-with-jupyter-notebooks">Overriding credentials at runtime (e.g. with Jupyter Notebooks)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-multiple-api-endpoints-for-advanced-users">Using multiple API endpoints (for advanced users)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#settings">Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#github-gists-token">Github Gists Token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dimcli-as-a-python-module">Dimcli as a Python module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dimcli-as-a-command-line-interface">Dimcli as a Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dimcli-with-jupyter-notebooks">Dimcli with Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comments-bug-reports">Comments, bug reports</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DimCli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started with Dimcli</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting-started.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started-with-dimcli">
<h1>Getting Started with Dimcli<a class="headerlink" href="#getting-started-with-dimcli" title="Permalink to this headline">¶</a></h1>
<div class="section" id="in-a-nutshell">
<h2>In a nutshell<a class="headerlink" href="#in-a-nutshell" title="Permalink to this headline">¶</a></h2>
<p>Dimcli is a Python client for accessing the <a class="reference external" href="https://www.dimensions.ai/">Dimensions Analytics API</a>. It makes it easier to authenticate against the API, send queries to it and process the JSON data being returned. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search grants for &quot;malaria&quot; return researchers&quot;&quot;&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
<span class="go">{&#39;researchers&#39;: [{&#39;id&#39;: &#39;ur.01332073522.49&#39;,</span>
<span class="go">   &#39;count&#39;: 75,</span>
<span class="go">   &#39;last_name&#39;: &#39;White&#39;,</span>
<span class="go">   &#39;first_name&#39;: &#39;Nicholas J&#39;},</span>
<span class="go">  {&#39;id&#39;: &#39;ur.01343654360.43&#39;,</span>
<span class="go">   &#39;count&#39;: 59,</span>
<span class="go">   &#39;last_name&#39;: &#39;Marsh&#39;,</span>
<span class="go">   &#39;first_name&#39;: &#39;Kevin&#39;},</span>
<span class="go">  .............</span>
<span class="go">  ],</span>
<span class="go"> &#39;_stats&#39;: {&#39;total_count&#39;: 8735}}</span>

</pre></div>
</div>
<p>Dimcli includes also a <strong>command line interface</strong> (CLI) that aims at simplifying the process of learning the grammar of the Dimensions Search Language (<a class="reference external" href="https://app.dimensions.ai/dsl">DSL</a>). Calling <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> from the terminal opens an interactive query console with syntax autocomplete, persistent history across sessions, pretty-printing and preview of JSON results, export to HTML and CSV, and more.</p>
<p><img alt="dimcli_animation" src="https://raw.githubusercontent.com/digital-science/dimcli/master/static/dimcli_animated.gif" /></p>
<p>Current version: see <a class="reference external" href="https://pypi.org/project/dimcli/">pypi homepage</a>.
Source code hosted on <a class="reference external" href="https://github.com/digital-science/dimcli">github</a>.
See also an older animated video on <a class="reference external" href="https://asciinema.org/a/jSzISIsaXN2VbpOApSSOSwGcj">asciicinema</a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install / upgrade the package as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install dimcli -U
</pre></div>
</div>
<p>Then you can check if the installation worked with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dimcli --help
</pre></div>
</div>
<div class="section" id="anaconda-users">
<h3>Anaconda users<a class="headerlink" href="#anaconda-users" title="Permalink to this headline">¶</a></h3>
<p>There’s been <a class="reference external" href="https://github.com/digital-science/dimcli/issues/21">reports</a> of Dimcli failing to install on Anacoda. This can be solved by updating manually a couple of libraries Dimcli relies on:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">prompt-toolkit</span> <span class="pre">-U</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">ipython</span> <span class="pre">-U</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>After installation it’s <strong>strongly advised to create a configuration file</strong> containing your Dimensions account credentials. This can be done only once and it’ll save you from having to type in credentials each time you use Dimcli. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span> <span class="c1"># config file is picked up automatically </span>
</pre></div>
</div>
<p>If you can’t create a configuration file you can explicitly provide log in credentials as follows (see also the <a class="reference external" href="#dimcli-as-a-python-module">Dimcli as a Python module</a> section for more options).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>

<span class="go"># you can specify endpoint, which by default is set to &quot;https://app.dimensions.ai&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> 
<span class="go">                 password=&quot;chimneysweeper&quot;, </span>
<span class="go">                 endpoint=&quot;https://app.dimensions.ai&quot;)</span>
</pre></div>
</div>
<p>Or if you are using <strong>key-based</strong> authentication:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;123456789qwertyuiop&quot;</span><span class="p">,</span>  
<span class="go">                 endpoint=&quot;https://https://my.instance.of.dimensions.ai&quot;)</span>
</pre></div>
</div>
<div class="section" id="creating-a-credentials-file-using-the-helper-script-recommended">
<h3>Creating a credentials file using the helper script (recommended)<a class="headerlink" href="#creating-a-credentials-file-using-the-helper-script-recommended" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to set up the authentication file is to use the command line helper:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dimcli --init
</pre></div>
</div>
<p>The helper will guide you through the process of creating this file, which will be safely stored in your computer home folder. That’s it - you’re ready to hit the API! See below for more info on how to do that.</p>
</div>
<div class="section" id="creating-a-credentials-file-manually">
<h3>Creating a credentials file manually<a class="headerlink" href="#creating-a-credentials-file-manually" title="Permalink to this headline">¶</a></h3>
<p>This section provides more details about where Dimcli expects credentials data to be found, in case you want to set this up manually.</p>
<p>The credentials file must be called <code class="docutils literal notranslate"><span class="pre">dsl.ini</span></code> and located in your user directory in the <code class="docutils literal notranslate"><span class="pre">.dimensions</span></code> folder. If you want to set this up manually, this is what you’d do on unix systems:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/.dimensions
$ touch ~/.dimensions/dsl.ini
</pre></div>
</div>
<p>Then open <code class="docutils literal notranslate"><span class="pre">dsl.ini</span></code> with a text editor. Its contents should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">live</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">app</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ai</span>
<span class="n">login</span><span class="o">=</span><span class="n">user</span><span class="nd">@mail</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">yourpasswordhere</span>
<span class="n">key</span><span class="o">=</span><span class="n">yourkeyhere</span>
</pre></div>
</div>
<p>In most situations you can simply copy/paste the text above and update its contents as needed.</p>
<div class="section" id="important">
<h4>Important<a class="headerlink" href="#important" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>you must always have an entry in the credentials file called <code class="docutils literal notranslate"><span class="pre">[instance.live]</span></code></p></li>
<li><p>depending on whether you authenticate using an API key or username &amp; password, fill in the relevant details and just leave the other stuff blank. Eg this is a valid config snippet if you authenticate using a key:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">live</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">app</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ai</span>
<span class="n">login</span><span class="o">=</span>
<span class="n">password</span><span class="o">=</span>
<span class="n">key</span><span class="o">=</span><span class="n">yourkeyhere</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="overriding-credentials-at-runtime-e-g-with-jupyter-notebooks">
<h3>Overriding credentials at runtime (e.g. with Jupyter Notebooks)<a class="headerlink" href="#overriding-credentials-at-runtime-e-g-with-jupyter-notebooks" title="Permalink to this headline">¶</a></h3>
<p>If you are using Dimcli within a Jupyter notebook and you do not want (or cannot) set up credentials globally, you can simply put a <code class="docutils literal notranslate"><span class="pre">dsl.ini</span></code> file in the current working directory (= where the notebook is located).</p>
<p>The file contents should look just like above, that is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">live</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">app</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ai</span>
<span class="n">login</span><span class="o">=</span><span class="n">user</span><span class="nd">@mail</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">yourpasswordhere</span>
<span class="n">key</span><span class="o">=</span><span class="n">yourkeyhere</span>
</pre></div>
</div>
<p><strong>Note</strong> the same-directory credentials will take precedence over any system-level credentials previously defined.</p>
</div>
<div class="section" id="using-multiple-api-endpoints-for-advanced-users">
<h3>Using multiple API endpoints (for advanced users)<a class="headerlink" href="#using-multiple-api-endpoints-for-advanced-users" title="Permalink to this headline">¶</a></h3>
<p>If you have access to multiple Dimensions API endpoints (or instances), you can just add more entries to the credentials file.</p>
<p>You can add details for more than one instance but make sure you give them unique names. So for example you can add another entry like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">private</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">private</span><span class="o">-</span><span class="n">instance</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ai</span>
<span class="n">login</span><span class="o">=</span><span class="n">user</span><span class="nd">@mail</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">yourpasswordhere</span>
<span class="n">key</span><span class="o">=</span><span class="n">yourkeyhere</span>
</pre></div>
</div>
<p>Then when running the CLI you can select which instance to use just by passing its name as argument eg</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dimcli private
</pre></div>
</div>
</div>
</div>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>A settings file can be stored alongside the authentication details file, in order to enable other functionalities.</p>
<p>This file must be called <code class="docutils literal notranslate"><span class="pre">settings</span></code> and it has to be located in your user directory, in the <code class="docutils literal notranslate"><span class="pre">.dimensions</span></code> folder. This is what you’d do on unix systems:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ touch ~/.dimensions/settings
</pre></div>
</div>
<div class="section" id="github-gists-token">
<h3>Github Gists Token<a class="headerlink" href="#github-gists-token" title="Permalink to this headline">¶</a></h3>
<p>By adding a github authentication <a class="reference external" href="https://github.com/settings/tokens">token</a> to the settings file, it is possible to save API query results to <a class="reference external" href="https://gist.github.com/">https://gist.github.com/</a>.</p>
<p>See this guide on <a class="reference external" href="https://docs.github.com/en/free-pro-team&#64;latest/github/authenticating-to-github/creating-a-personal-access-token">how to create a new token</a>. Ensure that the token has the ‘gists’ scope from the available options.</p>
<p>One you have the token, add the following section to the <code class="docutils literal notranslate"><span class="pre">settings</span></code> file (of course replacing the token value with your token):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">gist</span><span class="p">]</span>
<span class="n">token</span><span class="p">:</span> <span class="n">d5047fASAD889912HHBAJVSAD8e8bae17e2</span>
</pre></div>
</div>
<p>This will allow to export/create gists from DSL queries when using the Dimcli CLI.</p>
<blockquote>
<div><p>NOTE: all gists created by Dimcli are not private to your Github account (=unlisted)</p>
</div></blockquote>
</div>
</div>
<div class="section" id="dimcli-as-a-python-module">
<h2>Dimcli as a Python module<a class="headerlink" href="#dimcli-as-a-python-module" title="Permalink to this headline">¶</a></h2>
<p>Dimcli can be used as a wrapper around the Dimensions API within a Python program. It makes it easier to authenticate, query the Dimensions endpoint and handle the results, normally returned as JSON.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dimcli</span>

<span class="go"># if you have already set up the credentials file (see above), no need to pass log in details</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="go"># otherwise you can authenticate by passing your login details as arguments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">)</span>

<span class="go"># you can specify endpoint, which by default is set to &quot;https://app.dimensions.ai&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;mary.poppins&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;chimneysweeper&quot;</span><span class="p">,</span> <span class="n">ednpoint</span><span class="o">=</span><span class="s2">&quot;https://nannies-research.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once logged in, you can get a query object and try some queries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>

<span class="c1"># queries always return a DslDataset object (subclassing IPython.display.JSON)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search grants for </span><span class="se">\&quot;</span><span class="s2">malaria</span><span class="se">\&quot;</span><span class="s2"> return publications&quot;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">dimcli</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">DslDataset</span> <span class="nb">object</span><span class="o">&gt;</span>

<span class="c1"># use the .data method to get the JSON</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search grants for </span><span class="se">\&quot;</span><span class="s2">malaria</span><span class="se">\&quot;</span><span class="s2"> return publications&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="p">{</span><span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;header&#39;</span><span class="p">:</span> <span class="s1">&#39;Semantic Error&#39;</span><span class="p">,</span>
   <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Semantic errors found:</span><span class="se">\n\t</span><span class="s2">Facet &#39;publications&#39; is not present in source &#39;grants&#39;. Available facets are: FOR,FOR_first,HRCS_HC,HRCS_RAC,RCDC,active_year,funder_countries,funders,funding_org_acronym,funding_org_city,funding_org_name,language,research_org_cities,research_org_countries,research_org_name,research_org_state_codes,research_orgs,researchers,start_year,title_language&quot;</span><span class="p">],</span>
   <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;search grants for &quot;malaria&quot; return publications&#39;</span><span class="p">}}}</span>

<span class="c1"># now a good query</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;search grants for </span><span class="se">\&quot;</span><span class="s2">malaria</span><span class="se">\&quot;</span><span class="s2"> return researchers&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;researchers&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;ur.01332073522.49&#39;</span><span class="p">,</span>
   <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
   <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;White&#39;</span><span class="p">,</span>
   <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nicholas J&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;ur.01343654360.43&#39;</span><span class="p">,</span>
   <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">59</span><span class="p">,</span>
   <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Marsh&#39;</span><span class="p">,</span>
   <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Kevin&#39;</span><span class="p">},</span>
  <span class="o">.............</span>
  <span class="p">],</span>
 <span class="s1">&#39;_stats&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;total_count&#39;</span><span class="p">:</span> <span class="mi">8735</span><span class="p">}}</span>

<span class="c1"># JSON keys are available also as dict attributes</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;researchers&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> 
<span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;ur.01332073522.49&#39;</span><span class="p">,</span>
 <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
 <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;White&#39;</span><span class="p">,</span>
 <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nicholas John&#39;</span><span class="p">}</span>
<span class="c1"># note: res.[&#39;researchers&#39;] is also allowed!</span>

<span class="c1"># so now let&#39;s pull out all names and surnames</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;researchers&#39;</span><span class="p">]]</span>
<span class="p">[</span><span class="s1">&#39;Nicholas John White&#39;</span><span class="p">,</span>  <span class="s1">&#39;Kevin Marsh&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Nicholas Philip John Day&#39;</span><span class="p">,</span> <span class="s1">&#39;Takafumi Tsuboi&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Malcolm Edward Molyneux&#39;</span><span class="p">,</span> <span class="s1">&#39;Kazuyuki Tanabe&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Stephen Lev Hoffman&#39;</span><span class="p">,</span> <span class="s1">&#39;Toshihiro Horii&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Louis H Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;Francois Henri Nosten&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Motomi Torii&#39;</span><span class="p">,</span> <span class="s1">&#39;Alan Frederick Cowman&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Patrick Emmet Duffy&#39;</span><span class="p">,</span> <span class="s1">&#39;Satoru Kawai&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Alister Gordon Craig&#39;</span><span class="p">,</span> <span class="s1">&#39;Fumihiko Kawamoto&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Makoto Hirai&#39;</span><span class="p">,</span> <span class="s1">&#39;Marcelo Urbano Ferreira&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Osamu Kaneko&#39;</span><span class="p">,</span> <span class="s1">&#39;Yusuke Wataya&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://api-lab.dimensions.ai/">Dimensions API Lab</a> includes several notebooks demonstrating the practical use of Dimcli. In particular, these two are a good place to start:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html">The Dimcli Python library: Installation and Querying</a></p></li>
<li><p><a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/3-Working-with-dataframes.html">The Dimcli Python library: Working with Pandas Dataframes</a></p></li>
</ul>
</div>
<div class="section" id="dimcli-as-a-command-line-interface">
<h2>Dimcli as a Command Line Interface<a class="headerlink" href="#dimcli-as-a-command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>Dimcli includes a handy Command Line Interface (CLI) which lets you query the Dimensions API interactively. The CLI has several features but, most importantly, it allows to use the TAB key to autocomplete your queries (based on the latest API syntax and fields), which makes it an ideal tool for both newbies and expert users.</p>
<p>Run the command line application by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dimcli
</pre></div>
</div>
<p>That’ll launch the Dimcli console, where you can hit <code class="docutils literal notranslate"><span class="pre">help</span></code> in case you need more support :-)</p>
<p><img alt="dimcli_animation" src="https://raw.githubusercontent.com/digital-science/dimcli/master/static/dimcli_animated.gif" /></p>
</div>
<div class="section" id="dimcli-with-jupyter-notebooks">
<h2>Dimcli with Jupyter Notebooks<a class="headerlink" href="#dimcli-with-jupyter-notebooks" title="Permalink to this headline">¶</a></h2>
<p>Dimcli includes a number of features that simplify working with the Dimensions API within Jupyter notebooks.</p>
<p>For example, it contains a few <a class="reference external" href="https://github.com/digital-science/dimcli/blob/master/dimcli/jupyter/magics.py">magic commands</a> that make it super-easy to hit the API from a notebook cell:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%dsl</span></code> can be used to run an API query</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%dslloop</span></code> can be used to run an API query, using pagination (= iterations up to 50k records)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%dsldf</span></code> can be used to run an API query and transform the JSON data to a dataframe</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%dslloopdf</span></code> can be used to run a paginated API query and transform the JSON data to a dataframe</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%dsldocs</span></code> can be used to programmatically extract API schema information</p></li>
</ul>
<p>For more information and examples see the <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/4-Dimcli-magic-commands.html">The Dimcli Python library: Magic Commands</a> notebook available in the <a class="reference external" href="https://api-lab.dimensions.ai/">Dimensions API Lab</a>.</p>
</div>
<div class="section" id="comments-bug-reports">
<h2>Comments, bug reports<a class="headerlink" href="#comments-bug-reports" title="Permalink to this headline">¶</a></h2>
<p>Dimcli lives on <a class="reference external" href="https://github.com/digital-science/dimcli/">Github</a>. You can file <a class="reference external" href="https://github.com/digital-science/dimcli/issues/new">issues</a> or pull requests there. Suggestions, pull requests and improvements welcome!</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="Modules Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to DimCli’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Digital Science

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>